<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>喵喵共享留言墙</title>
    <style>
        /* 主题样式 */
        .theme-pink {
            --primary-bg: linear-gradient(135deg, #ffcfe0, #f598b9);
            --header-bg: rgb(245, 152, 185);
            --card-header-bg: rgb(240, 251, 255);
            --card-content-bg: rgb(190, 219, 233);
            --accent-color: #d44d7e;
            --border-color: #f598b9;
        }
        
        .theme-blue {
            --primary-bg: linear-gradient(135deg, #a8d8ff, #6bb5ff);
            --header-bg: rgb(107, 181, 255);
            --card-header-bg: rgb(240, 248, 255);
            --card-content-bg: rgb(200, 230, 255);
            --accent-color: #2d7dd2;
            --border-color: #6bb5ff;
        }
        
        .theme-green {
            --primary-bg: linear-gradient(135deg, #b8e994, #78e08f);
            --header-bg: rgb(120, 224, 143);
            --card-header-bg: rgb(240, 255, 244);
            --card-content-bg: rgb(200, 240, 210);
            --accent-color: #38a169;
            --border-color: #78e08f;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: var(--primary-bg);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #333;
            overflow-x: hidden;
        }
        
        .header {
            width: 100%;
            max-width: 1200px;
            margin-bottom: 30px;
        }
        
        .tt {
            color: white;
            text-align: center;
            font-size: 48px;
            background: var(--header-bg);
            height: 80px;
            line-height: 80px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .main-container {
            display: flex;
            width: 100%;
            max-width: 1200px;
            gap: 30px;
        }
        
        .form-section {
            flex: 0 0 350px;
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            height: fit-content;
        }
        
        .wall-section {
            flex: 1;
            min-height: 600px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .card {
            width: 300px;
            height: 180px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: absolute;
            cursor: move;
            transition: box-shadow 0.3s, transform 0.1s;
            overflow: hidden;
        }
        
        .card.dragging {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            transform: scale(1.02);
            z-index: 100;
        }
        
        .card-header {
            display: flex;
            padding: 12px 15px;
            align-items: center;
            height: 50px;
            background: var(--card-header-bg);
            position: relative;
        }
        
        .circles {
            display: flex;
        }
        
        .circle {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .circle.red {
            background: #ff5a5a;
        }
        
        .circle.orange {
            background: #ffb443;
        }
        
        .circle.green {
            background: #4cd964;
        }
        
        .card-title {
            padding-left: 15px;
            font-weight: bold;
            font-size: 18px;
        }
        
        .close-btn {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 22px;
            height: 22px;
            background: #ff5a5a;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .close-btn:hover {
            background: #ff2a2a;
        }
        
        .card-content {
            height: 130px;
            background: var(--card-content-bg);
            font-size: 20px;
            display: flex;
            align-items: center;
            padding: 0 20px;
            word-break: break-word;
            overflow-wrap: break-word;
            line-height: 1.4;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--accent-color);
            font-size: 16px;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
            font-family: inherit;
        }
        
        input:focus, textarea:focus, select:focus {
            border-color: var(--accent-color);
            outline: none;
        }
        
        textarea {
            height: 100px;
            resize: vertical;
        }
        
        .add-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            width: 100%;
            font-weight: bold;
        }
        
        .add-btn:hover {
            filter: brightness(0.9);
        }
        
        .card-counter {
            margin-top: 15px;
            text-align: center;
            color: var(--accent-color);
            font-weight: bold;
            font-size: 16px;
        }
        
        .instructions {
            margin-top: 20px;
            text-align: center;
            color: rgba(0, 0, 0, 0.7);
            font-size: 16px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            width: 100%;
            max-width: 1200px;
        }
        
        .reset-btn {
            margin-top: 20px;
            padding: 12px 25px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .reset-btn:hover {
            filter: brightness(0.9);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            width: 100%;
            max-width: 1200px;
        }
        
        @media (max-width: 1000px) {
            .main-container {
                flex-direction: column;
            }
            
            .form-section {
                flex: none;
                width: 100%;
            }
        }
    </style>
</head>
<body class="theme-pink">
    <div class="header">
        <div class="tt">共享留言墙</div>
    </div>
    
    <div class="main-container">
        <div class="form-section">
            <div class="form-group">
                <label for="cardTitle">卡片标题：</label>
                <input type="text" id="cardTitle" placeholder="例如：周五" value="新卡片">
            </div>
            <div class="form-group">
                <label for="cardContent">卡片内容：</label>
                <textarea id="cardContent" placeholder="输入你想说的话...">这里可以写任何内容！</textarea>
            </div>

            <div class="form-group">
                <label for="themeSelector">主题选择：</label>
                <select id="themeSelector">
                    <option value="theme-pink">粉色主题</option>
                    <option value="theme-blue">蓝色主题</option>
                    <option value="theme-green">绿色主题</option>
                </select>
            </div>

            <button class="add-btn" id="addCardBtn">添加卡片</button>
            <div class="card-counter" id="cardCounter">当前有 1 张卡片</div>
        </div>
        
        <div class="wall-section" id="wallContainer">
            <!-- 卡片将通过JS动态添加 -->
            <div class="card" id="initialCard">
                <div class="card-header">
                    <div class="circles">
                        <div class="circle red"></div>
                        <div class="circle orange"></div>
                        <div class="circle green"></div>
                    </div>
                    <div class="card-title">欢迎</div>
                    <div class="close-btn">×</div>
                </div>
                <div class="card-content">欢迎来到共享留言墙！</div>
            </div>
        </div>
    </div>
    
    <div class="instructions">
        试试这些功能：<br>
        1. 拖动卡片到任意位置<br>
        2. 点击卡片右上角的 × 删除卡片<br>
        3. 使用左侧表单添加新卡片<br>
        4. 选择不同主题切换颜色风格
    </div>
    
    <div class="controls">
        <button class="reset-btn" id="resetBtn">重置所有卡片</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 主题切换功能
            const themeSelector = document.getElementById('themeSelector');
            themeSelector.addEventListener('change', function() {
                document.body.className = this.value;
            });
    
            const wallContainer = document.getElementById('wallContainer');
            const addCardBtn = document.getElementById('addCardBtn');
            const cardTitle = document.getElementById('cardTitle');
            const cardContent = document.getElementById('cardContent');
            const resetBtn = document.getElementById('resetBtn');
            const cardCounter = document.getElementById('cardCounter');
            
            let cardIdCounter = 1;
            
            // 初始化 - 使初始卡片可拖动和可关闭
            makeCardDraggable(document.getElementById('initialCard'));
            addCloseFunctionality(document.getElementById('initialCard'));
            updateCardCounter();
            
            // 添加卡片按钮事件
            addCardBtn.addEventListener('click', function() {
                const title = cardTitle.value.trim() || '新卡片';
                const content = cardContent.value.trim() || '这里可以写任何内容！';
                
                if (content) {
                    addCard(title, content);
                    // 清空表单
                    cardTitle.value = '';
                    cardContent.value = '';
                }
            });
            
            // 重置按钮事件
            resetBtn.addEventListener('click', function() {
                // 移除所有卡片
                const cards = document.querySelectorAll('.card');
                cards.forEach(card => {
                    if (card.id !== 'initialCard') {
                        card.remove();
                    }
                });
                
                // 重置初始卡片位置
                setInitialPosition(document.getElementById('initialCard'));
                updateCardCounter();
            });
            
            // 添加新卡片函数
            function addCard(title, content) {
                cardIdCounter++;
                
                // 创建新卡片
                const newCard = document.createElement('div');
                newCard.className = 'card';
                newCard.id = 'card-' + cardIdCounter;
                
                // 设置卡片内容
                newCard.innerHTML = `
                    <div class="card-header">
                        <div class="circles">
                            <div class="circle red"></div>
                            <div class="circle orange"></div>
                            <div class="circle green"></div>
                        </div>
                        <div class="card-title">${title}</div>
                        <div class="close-btn">×</div>
                    </div>
                    <div class="card-content">${content}</div>
                `;
                
                // 添加到容器
                wallContainer.appendChild(newCard);
                
                // 设置随机位置
                setRandomPosition(newCard);
                
                // 使卡片可拖动和可关闭
                makeCardDraggable(newCard);
                addCloseFunctionality(newCard);
                
                // 更新卡片计数
                updateCardCounter();
            }
            
            // 使卡片可拖动
            function makeCardDraggable(card) {
                let isDragging = false;
                let currentX;
                let currentY;
                let initialX;
                let initialY;
                let xOffset = 0;
                let yOffset = 0;
                
                // 获取卡片当前位置
                const transform = card.style.transform;
                if (transform) {
                    const match = transform.match(/translate3d\(([^,]+)px,\s*([^,]+)px/);
                    if (match) {
                        xOffset = parseFloat(match[1]);
                        yOffset = parseFloat(match[2]);
                    }
                }
                
                // 鼠标按下事件
                card.addEventListener('mousedown', dragStart);
                
                function dragStart(e) {
                    // 如果点击的是关闭按钮，不触发拖动
                    if (e.target.classList.contains('close-btn')) {
                        return;
                    }
                    
                    // 防止文本选中
                    e.preventDefault();

                    initialX = e.clientX - xOffset;
                    initialY = e.clientY - yOffset;
                    
                    isDragging = true;
                    card.classList.add('dragging');
                    
                    document.addEventListener('mousemove', drag);
                    document.addEventListener('mouseup', dragEnd);
                }
                
                function drag(e) {
                    if (isDragging) {
                        e.preventDefault();
                        
                        currentX = e.clientX - initialX;
                        currentY = e.clientY - initialY;
                        
                        // 添加边界检查，防止拖出屏幕
                        const containerRect = wallContainer.getBoundingClientRect();
                        const cardRect = card.getBoundingClientRect();
        
                        currentX = Math.max(0, Math.min(currentX, containerRect.width - cardRect.width));
                        currentY = Math.max(0, Math.min(currentY, containerRect.height - cardRect.height));

                        xOffset = currentX;
                        yOffset = currentY;
                        
                        setTranslate(currentX, currentY, card);
                    }
                }
                
                function dragEnd(e) {
                    isDragging = false;
                    card.classList.remove('dragging');
                    
                    document.removeEventListener('mousemove', drag);
                    document.removeEventListener('mouseup', dragEnd);
                }
            }
            
            // 添加关闭功能
            function addCloseFunctionality(card) {
                const closeBtn = card.querySelector('.close-btn');
                closeBtn.addEventListener('click', function(e) {
                    e.stopPropagation(); // 防止触发拖动事件
                    card.remove();
                    updateCardCounter();
                });
            }
            
            // 设置卡片初始位置（用于重置）
            function setInitialPosition(card) {
                const containerRect = wallContainer.getBoundingClientRect();
                const cardRect = card.getBoundingClientRect();
                
                // 将卡片放置在容器中央
                const xOffset = (containerRect.width - cardRect.width) / 2;
                const yOffset = (containerRect.height - cardRect.height) / 2;
                
                setTranslate(xOffset, yOffset, card);
            }
            
            // 设置随机位置（用于新卡片）
            function setRandomPosition(card) {
                const containerRect = wallContainer.getBoundingClientRect();
                const cardWidth = 300;
                const cardHeight = 180;
                
                const maxX = containerRect.width - cardWidth - 20;
                const maxY = containerRect.height - cardHeight - 20;
                
                const xOffset = Math.max(10, Math.floor(Math.random() * maxX));
                const yOffset = Math.max(10, Math.floor(Math.random() * maxY));
                
                setTranslate(xOffset, yOffset, card);
            }
            
            // 应用位置变换
            function setTranslate(xPos, yPos, el) {
                el.style.transform = `translate3d(${xPos}px, ${yPos}px, 0)`;
            }
            
            // 更新卡片计数
            function updateCardCounter() {
                const cardCount = document.querySelectorAll('.card').length;
                cardCounter.textContent = `当前有 ${cardCount} 张卡片`;
            }
            
            // 初始化设置初始卡片位置
            setInitialPosition(document.getElementById('initialCard'));
        });
    </script>
</body>
</html>
